(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3305"],{"00b1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("PageHeader",{attrs:{title:(e.$route.query.id?"编辑":"新建")+"项目资源"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"图片",prop:"url"}},[r("MyUpload",{attrs:{count:e.count,list:e.fileList},on:{"update:list":function(t){e.fileList=t}},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"种类",prop:"cateId"}},[r("MySelect",{attrs:{list:e.cates,text:"项目种类"},model:{value:e.form.cateId,callback:function(t){e.$set(e.form,"cateId",t)},expression:"form.cateId"}})],1),r("div",{staticClass:"form-btns"},[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},n=[],i=(r("d81d"),r("96cf"),r("1da1")),c=r("5530"),o=r("365c"),s=r("08f3"),u=r("2f62"),l={name:"CateCreate",data:function(){var e=this,t=function(t,r,a){e.fileList&&0!==e.fileList.length?a():a(new Error("请选择图片"))};return{loading:!1,count:9,fileList:[],form:{url:"",cateId:""},cities:s["a"],rules:{cateId:[{required:!0,message:"请选择种类"}],url:[{validator:t,trigger:"change"}]}}},created:function(){this.fetchData()},computed:Object(c["a"])({},Object(u["c"])({cates:"cates"})),methods:{changeFileList:function(e){this.fileList=e},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.query.id,r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,o["a"].resource.get(r);case 5:a=t.sent,n=e.$resolveImg(a.url),e.form=Object(c["a"])({},a),e.fileList=[{name:n,url:n,path:a.url}],e.count=1;case 10:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}return e.loading=!0,t.prev=2,a=Object(c["a"])({},e.form,{fileList:e.fileList.map((function(t){return e.$resolvePath(t)}))}),t.next=6,o["a"].resource.create(a);case 6:t.sent,e.$toast("".concat(e.form.id?"修改":"新建","成功")),e.$router.back(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},f=l,m=r("2877"),d=Object(m["a"])(f,a,n,!1,null,null,null);t["default"]=d.exports}}]);